<!DOCTYPE html>
<html>
  <head>
    <title>TDED Gebze Kitaplığı</title>
    <link rel="stylesheet" href="/webix/codebase/skins/compact.css" type="text/css" charset="utf-8">
    <script src="/webix/codebase/webix.js" type="text/javascript" charset="utf-8"></script>


  </head>
  <body>

    <style>
      .highlight{
        background-color:#FFAAAA;
      }
      .addicon{
        text-align:center;
      }
    </style>

    <script type="text/javascript" charset="utf-8">
      /*
      //named css
      function mark_old(value){
        if (value < 1)
          return "highlight";
      }

      function date_string()
      {
        var today = new Date()
        var year = today.getFullYear()
        var monthNumber = Number(today.getMonth()) + 1
        var month = ""
        if(monthNumber<10){ month = "0"+String(monthNumber) }
        else{ month = String(monthNumber) }
        var dayNumber = today.getDate()
        var day = ""
        if(dayNumber<10){ day = "0"+String(dayNumber) }
        else{ day = String(dayNumber) }
        return year+"-"+month+"-"+day
      }

      function linkClick()
      {
        var id = $$("links").getSelectedId()
        $$("links").getItem(id)["lastvisit"] = date_string()
        $$("links").updateItem(id,$$("links").getItem(id))
        $$("links").getItem(id)["pastvis"] = $$("links").getItem(id).period
        $$("links").updateItem(id,$$("links").getItem(id))
        open($$("links").getItem(id)["url"])
      }		

      function add_row(){
        var url = $$("links").getHeaderContent("urlHead").getValue()
        webix.ajax().get("/link/title",{"url":url},function(t,x,x){
          $$("links").add({ "class":$$("links").getHeaderContent("classHead").getValue(),
                           "category":$$("links").getHeaderContent("categoryHead").getValue(),
                           "tags":$$("links").getHeaderContent("tagsHead").getValue(),
                           "head":t,
                           "url":$$("links").getHeaderContent("urlHead").getValue(),
                           "period":$$("links").getHeaderContent("periodHead").getValue(),
                           "lastvisit":date_string(),
                           "pastvis":$$("links").getHeaderContent("periodHead").getValue()});
          $$("links").getHeaderContent("classHead").setValue("")
          $$("links").getHeaderContent("categoryHead").setValue("")
          $$("links").getHeaderContent("tagsHead").setValue("")
          $$("links").getHeaderContent("headHead").setValue("")
          $$("links").getHeaderContent("urlHead").setValue("")
          $$("links").getHeaderContent("periodHead").setValue("")
        })
      }
      function delete_row(){
        $$("links").remove($$("links").getSelectedId(true) );
      }		
*/
      webix.ready(function(){

        var grid = {
          id: "books",
          url:"/tdedgebze/kitaplik",
          save:"rest->/tdedgebze/kitaplik",
          view:"datatable", select:"row",
          columns:[
            {id:"no", header:"Sıra", width:50, sort:"int", fillspace:2},
            //{id:"location", header:["Konum",{content:"textFilter"}], width:75, sort:"text"},
            //{id:"year", header:["Yıl",{content:"textFilter", contentId:"tagsHead"}], editor:"text", fillspace:2}, 
            {id:"author", header:["Yazar",{content:"textFilter"}], editor:"text", fillspace:4},
            {id:"title", header:["Adı",{content:"textFilter", contentId:"urlHead"}], editor:"text", fillspace:11},
            //{id:"category", header:["Kategori",{content:"selectFilter", contentId:"categoryHead"}], editor:"text", fillspace:4},
            {id:"topic", header:["Tür",{content:"selectFilter", contentId:"categoryHead"}], editor:"text", fillspace:4},            
            {id:"publisher", header:["Yayınevi",{content:"textFilter", contentId:"classHead"}], editor:"text", sort:"text", fillspace:3},                      
          ],
          //editable:true, editaction:"dblclick",
          on:{
            "onAfterLoad":function(){this.sort("no","asc","int")}
          }			
        }


        app = webix.ui({
          rows:[
            {view:"toolbar", elements:[
              {view:"label", label:"TÜRK DİL ve EDEBİYAT DERNEĞİ GEBZE SUBESİ", align:"center"}
            ]},
            {view:"toolbar", elements:[
              {view:"label", label:"Kitaplık Uygulaması", align:"center"},
              {id:"addicon", view:"button", type:"icon", icon:"plus", width:70, align:"right", click:function(){
                webix.ui({
                  id:"addWindow",
                  view:"window",
                  headHeight:0,
                  width: 600,
                  height: 400,
                  body:{
                    cols:[
                      {rows:[
                        {view:"toolbar", elements:[
                          {view:"label", width:30, align:"left"},
                          {view:"label", label:"Kitap Ekle", align:"center"},
                          {id:"addicon", view:"button", type:"icon", icon:"times", width:30, align:"right", click:function(){
                          	$$("addWindow").close()
                          }}
                        ]},
                        {id:"addForm", view:"form", elements:[
                          //{name:"location", view:"text", label:"Konum", labelWidth:75, width:350},
                          //{name:"year", view:"text", label:"Yıl", labelWidth:75, width:350},
                          {name:"author", view:"text", label:"Yazar", labelWidth:75, width:350},
                          {name:"title", view:"text", label:"Adı", labelWidth:75, width:350},
                          {name:"topic", view:"select", label:"Tür", labelWidth:75, width:350, options:[
                            "Fikir", "Ansiklopedi", "Sözlük", "Roman/Hikaye", "Şiir", "Araştırma/İnceleme", "Biyografi", "Dini"
                          ]},
                          {name:"publisher", view:"text", label:"Yayınevi", labelWidth:75, width:350},            
                        ]},
                        {view:"button", label:"Ekle", click:function(){
                          $$("books").add($$("addForm").getValues());
                        }}
                      ]},
                    ]},
                  position:"center",
                }).show();
              }},
            ]},
            grid
          ]
        });

      });





    </script>
  </body>
</html>

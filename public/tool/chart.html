<!DOCTYPE html>
<html>
    <head><!--- Header --->
        <title>Araçlar: Grafik</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/async/2.0.1/async.min.js"></script>
        <!--Webix-->
        <link rel="stylesheet" href="/webix/codebase/skins/compact.css" type="text/css" charset="utf-8">
        <script src="/webix/codebase/webix.js" type="text/javascript" charset="utf-8"></script>
        <!--Moment-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/locale/tr.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.5/moment-timezone-with-data.min.js"></script>
        <!--CodeMirror-->
        <script src="/codemirror/lib/codemirror.js"></script>
        <link rel="stylesheet" href="/codemirror/lib/codemirror.css">
    </head>

<style type="text/css">
	@media (pointer:coarse) {
		body.webix_full_screen{
			overflow: auto;
		}
	}
</style>

    <body><!--- Body --->
        <script type="text/javascript" charset="utf-8">
            webix.ui.fullScreen();
            webix.ready(function(){

                var codemirrorLayout = {
                    rows:[
                        {
                            view:"toolbar",
                            id:"myToolbar",
                            cols:[
                                { view:"label", label:"Veri Dosyası", align:"left" },
                                { view:"label", template:"<i><font size=2>Lütfen dosyayı aşağıya sürükleyip bırakın...</font><i>", align:"right"},
                            ]
                        },
                        {id:"codemirror"}
                    ]         
                }

                var bokehLayout = {
                    rows:[
                        {
                            view:"toolbar",
                            id:"myToolbar",
                            cols:[
                                {view:"label", label:"Grafik", align:"left" },
                                {view:"button", label:"Çizdir", align:"right", autowidth:true, click:function(){
                                     webix.ajax().get("/tool/chart/draw",{"input":codemirror.getValue(),"width":$$("bokehFrame").$width-75,"height":$$("bokehFrame").$height},function(t,d,x){
                                         $$("bokehFrame").load("/"+t) 
                                         $$("bokehFrame").adjust()
                                     })
                                } },
                            ]
                        },
                        {view:"iframe", id:"bokehFrame"}
                    ]         
                }
/*
                webix.ui({
                    margin:10, padding:0, type:"wide",
                    view:"flexlayout",
                    //container:"layout_div",
                    cols:[
                        {rows:[codemirrorLayout,bokehLayout], gravity:3},
                        {header:"Veri Tablosu", id:"datatable",gravity:1}, 
                        {header:"Seçenekler", id:"sesenekler",gravity:1}, 
                    ]
                })
*/

                
                webix.ready(function(){
                    webix.Touch.disable(true);

                    var flex = {
                        margin:10, padding:0, type:"wide",
                        view:"flexlayout",
                        cols:[
                            {rows:[codemirrorLayout,bokehLayout], gravity:3,  minHeight:400},
                            { view:"list", data:[
                                { value:"Albert Brown" },{ value:"Mono Delorini" },{ value:"Sergey Bobrovski" }, { value:"Mikita Alaev" }
                            ], minWidth:320, select:true },
                            { view:"list", data:[
                                { value:"Accounts" },{ value:"History" },{ value:"Settings" }
                            ], minWidth:320, select:true },
                            {   
                                template:"Try to resize screen, or open this sample on a mobile device",
                                minWidth:320, minHeight:400
                            },
                            {
                                template:"column 3", minWidth:320, minHeight:400
                            }
                        ]
                    };

                    webix.ui(flex);
                    webix.ui.fullScreen();
                })
                 var codemirror = CodeMirror($$("codemirror").getNode(), {
                    value: "1\t5\n2\t6\n3\t10",
                });               
            });
        </script>
    </body>
</html>																														
